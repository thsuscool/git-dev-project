<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="/mobile/js/plugins/sop-mobile/sop.css" />
		<script src="/mobile/js/plugins/sop-mobile/sop-mobile.js"></script>
		<script src="/mobile/js/common/includeHead.js"></script>
		<script src="/mobile/js/common/common.js"></script>
		
		<!-- 컬러픽커 -->
		<link rel="stylesheet" href="/js/plugins/colorpicker/css/colpick.css" media="screen" />
		<script src="/js/plugins/colorpicker/js/colpick.js"></script>
		<script src="/js/plugins/colorpicker/js/jquery.xcolor.js"></script>
		<!-- 컬러픽커 -->
			
		<!-- 하이차트 -->
		<script src="/js/plugins/highcharts/highcharts.js"></script>
		
		<!-- 사용자지정 컨트롤 -->
		<script src="/mobile/js/thematicMap/thematicMap_api.js"></script>
		
		<script src="/mobile/js/common/map.js"></script>
		<script src="/mobile/js/common/mapInfo.js"></script>
		<script src="/mobile/js/common/mapNavigation.js"></script>
			
		<link rel="stylesheet" href="/mobile/css/im.css"/>
		<link rel="stylesheet" href="/mobile/css/interactiveFunc.css"/>
		<script src="/js/plugins/libs/jquery-ui.js"></script>
		<script src="/mobile/js/common/sgis-mobile.js"></script>
		<script src="/mobile/js/common/poi.js"></script>
		<script src="/mobile/js/interactive/interactiveMap.js"></script>
		<script src="/mobile/js/interactive/interactiveMapApi.js"></script>
		<script src="/mobile/js/interactive/interactiveDataBoard.js"></script>
		<script src = "//connect.facebook.net/ko_KR/all.js#xfbml=1&appId=1516531411965359"></script>
		<script src="/js/interactive/kakao_script_api.js"></script>
		<script src="/mobile/js/community/communityCommon.js"></script>
		<script src="/mobile/js/community/communityForm.js"></script>
		<title>통계소통지도</title>
		<meta name="title" content="<a href='/mobile/html/community/intro.html' style='color:#fff;'><img src='/mobile/img/mobile/menu2_4.png' style='width:20px;margin-bottom: 4px;'/> 통계소통지도</a>"/>
		<script>
			$sgis.ready(function(){
				if(!AuthInfo.authStatus&&!/M|P|A/.test($communityForm.communityInfo.result.summary.cmmnty_partcptn_grant_yn)) {
					messageConfirm.open(
						"알림", 
						"로그인 후 사용하실 수 있습니다<br>로그인페이지로 이동하시겠습니까?",
						btns = [{
							title : "이동하기",
							fAgm : null,
							disable : false,
							func : function(opt) {
								location.href=contextPath+"/mobile/html/member/login.html?returnPage="+encodeURIComponent("/mobile/html/community/mapPrtcpntRegistForm.html?cmmnty_map_id="+getParameter("cmmnty_map_id"))
								return false;
							}
						},{
							title : "취소하기",
							fAgm : null,
							disable : false,
							func : function(opt) {
								location.href=contextPath+"/mobile/html/community/mapPrtcpntRegistResult.html?cmmnty_map_id="+getParameter("cmmnty_map_id")
							}
						}]
					);
				}
			});
			function popupCallback(jibun, roadAddress){
				var sopAbs = new sop.portal.absAPI();
				sopAbs.onBlockUIPopup();
				var jibunAddr = $communityForm.getAddressFromAddress(jibun);
				var result = $communityForm.getAddressFromAddress(roadAddress);
				if(result&&result.result&&result.result.resultdata.length>0){
					var data = result.result.resultdata[0];
					$("#file_input_textLocation").val(roadAddress);
					var center = [data.x,data.y];
					var map = $interactiveMap.ui.mapList[$interactiveMap.ui.curMapId];
					$communityForm.addMarker(data.adm_cd,center[0],center[1],map);
					map.mapMove(center, map.gMap.getZoom());
				}else if(jibunAddr&&result.jibunAddr&&result.jibunAddr.resultdata.length>0){
					var data = result.result.resultdata[0];
					$("#file_input_textLocation").val(jibun);
					var center = [data.x,data.y];
					var map = $interactiveMap.ui.mapList[$interactiveMap.ui.curMapId];
					$communityForm.addMarker(data.adm_cd,center[0],center[1],map);
					map.mapMove(center, map.gMap.getZoom());
				}
				else{ 
					$("#file_input_textLocation").val("");
					$communityForm.x = null;
					$communityForm.y = null;
					messageAlert.open("알림", "주소가 잘못 되었습니다");
				}
				sopAbs.onBlockUIClose();
			}
		</script>
		<style>
		.sop-top.sop-left, .sop-top.sop-right{margin-top: 0;}
		</style>
	</head>
	<body>
		<div class="Wrap">
			<div class="Content">
				<div class="ContArea Community_Insert">
					<h1>소통지도 등록</h1>
					<button type="button" class="btn_back" onclick="location.href=contextPath+'/mobile/html/community/mapPrtcpntRegistResult.html?cmmnty_map_id='+getParameter('cmmnty_map_id')+'&center='+getParameter('center');">뒤로</button>
					<div class="Community_maparea">
						<div id="mapRgn_1" style="height:300px;"></div>
						<a href="javascript:void(0)" class="sideQuick sq03">
					   		<span>통계리스트</span>
					    	<img src="/img/ico/ico_totalmenu.gif" alt="통계리스트버튼" />
					    </a>
					    <div class="sqListBox sq03" style="left: -293px;">
						    <div id="searchBtnResultRgn" class="sqList">
						    	<ul id="cMapList">
						    	</ul>	
						    </div> 
							<div class="sqTabs">
						    	<span></span>
						   	</div>
						</div>
					</div>
					<form id="insert-form">
						<div class="InsertForm">
							<h2>등록할 위치를 입력하세요</h2>
							<div class="Insert_Position">
								<button type="button" onclick="$communityForm.currentLocationEvent()">현위치</button>
								<button type="button" onclick="$communityForm.curAddressSearchType='map';">위치선택</button>
								<button type="button" onclick="$communityForm.curAddressSearchType='popup';$communityForm.getFnZipCodeSearch();">주소선택</button>
								<label for="file_input_textLocation" class="Hidden">주소</label>
								<input id="file_input_textLocation" name="reg_lc" type="text" readonly="readonly" placeholder="위치선택 또는 주소선택해주세요">
							</div>
							<label for="cmmnty_title" class="label">제목</label>
							<input id="cmmnty_title" name="title" type="text">
							<label for="cmmnty_opinion_state" class="label">의견 (<span>0</span>/150)</label><!-- 20160530 나광흠 수정 -->
							<input id="cmmnty_opinion_state" name="opinion_state" type="text">
							<label class="label">아이콘</label>
							<ul id="symbol-type" class="List"></ul>
							<label for="fileSearch" class="label">사진</label>
							<div class="Insert_File">
								<div>
									<input id="filePathField" type="text" readonly="readonly" onclick='$("input[name=fileSearch]").click();'>
									<input id="fileSearch" name="fileSearch" type="file" accept="image/*" style="display:none;">
									<button type="button" onclick='$("input[name=fileSearch]").click();'>파일첨부</button>
								</div>
								<ul>
									<li>100MB미만의 사진 파일을 첨부할 수 있습니다.</li>
									<li>개인정보를 포함하거나 저작권에 위배되는 사진은 등록할 수 없습니다. (관리자 임의 삭제 가능)</li>
									<li>첨부한 사진은 공익을 목적으로 사용될 수 있습니다.</li>
								</ul>
							</div>
							<div id="join-m-type" style="display:none;">
								<label for="id" class="label">아이디</label>
								<input id="id" name="id" type="text">
								<label for="pw" class="label">비밀번호</label>
								<input id="pw" name="pw" type="password">
							</div>
							<div style="text-align:center;">
								<button type="submit" class="btn_finish">등록완료</button>
							</div>
						</div>
					</form>
					<!-- 통계 소통지도 E -->
					<div class="ContFooter">@Statistics Korea. All rights reserved.</div>
				</div>
			</div>
		</div>
		<script src="/mobile/js/common/includeBottom.js"></script>
	</body>
</html>